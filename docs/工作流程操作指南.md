# 工作流程操作指南

本文档详细介绍 Arthur-OA 系统中工作流程的完整操作流程，包括各菜单功能说明、标准流程从创建到员工使用的全流程，以及**抄送**功能的设置与使用。

**目录：**

- [一、工作流程菜单功能说明](#一工作流程菜单功能说明)（流程管理、审批中心、消息中心）
- [二、标准流程全流程：从创建到员工使用](#二标准流程全流程从创建到员工使用)
- [三、工作流程概述（简要对照表）](#三工作流程概述简要对照表)
- [四、抄送功能详解](#四抄送功能详解)
- [五、在流程设计中设置抄送节点](#五在流程设计中设置抄送节点)
- [六、审批时的抄送操作](#六审批时的抄送操作)
- [七、查看「抄送我的」](#七查看抄送我的)
- [八、完整流程示例：从设计到抄送](#八完整流程示例从设计到抄送)
- [九、其他常用功能速览](#九其他常用功能速览)
- [十、常见问题](#十常见问题)

---

## 一、工作流程菜单功能说明

### 1.1 流程管理（管理员/设计者使用）

流程管理用于**设计、配置、监控**各类工作流程，主要由流程管理员或业务管理员使用。

| 菜单 | 功能说明 |
|------|----------|
| **流程模型** | 设计、编辑、发布流程的「蓝图」。在此创建流程的基本信息、表单、流程图（含审批节点、抄送节点、条件分支等），并发布后供员工发起。 |
| **流程表单** | 创建和管理流程中使用的表单模板。表单用于收集业务数据（如请假日期、报销金额等），可被多个流程复用。 |
| **流程分类** | 对流程模型进行分类管理（如「人事流程」「财务流程」「项目流程」），便于查找和权限控制。 |
| **用户分组** | 定义用户组（如「部门经理组」「HR 组」），在流程设计中可将审批人/抄送人指定为某用户组，便于批量配置。 |
| **流程监听器** | 配置流程执行过程中的监听逻辑。例如：流程到达某节点时发送邮件、调用外部接口、更新业务数据等。 |
| **流程表达式** | 定义流程中的条件表达式和动态规则。用于条件分支、动态指定审批人等场景。 |
| **流程实例** | 查看所有流程实例（每次发起流程都会产生一个实例）的列表，可筛选状态、发起人、流程类型等，用于监控和统计。 |
| **流程任务** | 查看系统中所有流程产生的任务列表。管理员可在此查看全部待办、已办任务，用于监控和问题排查。 |

### 1.2 审批中心（员工/审批人使用）

审批中心是**员工日常使用**的核心入口，用于发起流程、处理待办、查看历史等。

| 菜单 | 功能说明 |
|------|----------|
| **发起流程** | 选择要发起的流程类型（如请假、报销），填写表单并提交，创建新的流程实例。 |
| **我的流程** | 查看自己发起的流程列表，可跟踪审批进度、查看详情、取消流程等。 |
| **待办任务** | 需要当前用户审批或办理的任务列表。审批人在此处理通过、拒绝、转办、委派、抄送等操作。 |
| **已办任务** | 当前用户已处理完成的任务历史，可查看审批记录和流程结果。 |
| **抄送我的** | 被抄送给当前用户的流程列表。可查看流程详情，但无需审批，仅作知悉。 |

### 1.3 消息中心（可选）

| 菜单 | 功能说明 |
|------|----------|
| **站内信管理** | 管理站内消息模板和发送规则。 |
| **通知公告** | 发布和管理系统通知、公告，供全员或指定范围查看。 |

---

## 二、标准流程全流程：从创建到员工使用

以下以「请假流程」为例，说明从管理员创建到员工使用的完整过程。

### 阶段一：管理员创建流程（流程管理）

```
流程分类 → 流程表单 → 流程模型（设计） → 发布
```

| 步骤 | 操作 | 说明 |
|------|------|------|
| 1 | 创建流程分类 | 在「流程分类」中新建「人事流程」，用于归类请假、加班等流程。 |
| 2 | 创建流程表单 | 在「流程表单」中设计「请假申请单」，包含：请假类型、开始日期、结束日期、请假事由等字段。 |
| 3 | 创建流程模型 | 在「流程模型」中新建「请假流程」，选择上述表单，进入流程设计。 |
| 4 | 设计流程图 | 在流程设计中绘制：发起人 → 部门审批 → （可选）抄送节点 → 结束。配置审批人、抄送人等。 |
| 5 | 保存并发布 | 保存流程设计，点击「发布」。发布后流程定义生效，员工可在「发起流程」中看到该流程。 |

### 阶段二：员工发起流程（审批中心）

```
发起流程 → 选择流程 → 填写表单 → 提交
```

| 步骤 | 操作 | 说明 |
|------|------|------|
| 1 | 进入发起流程 | 员工进入「审批中心 → 发起流程」。 |
| 2 | 选择流程类型 | 在流程列表中点击「请假流程」（可按分类筛选）。 |
| 3 | 填写表单 | 填写请假类型、日期、事由等信息，提交。 |
| 4 | 流程实例创建 | 系统创建流程实例，按设计将任务分配给部门审批人。 |

### 阶段三：审批人处理任务（审批中心）

```
待办任务 → 查看详情 → 审批（通过/拒绝/转办/委派/抄送等）
```

| 步骤 | 操作 | 说明 |
|------|------|------|
| 1 | 收到待办 | 部门负责人登录后，在「待办任务」中看到该请假申请。 |
| 2 | 进入详情 | 点击任务进入流程详情，查看表单内容、流程进度。 |
| 3 | 执行审批 | 选择「通过」或「拒绝」，可填写审批意见。可选操作：转办、委派、加签、退回、抄送。 |
| 4 | 流程流转 | 通过后流程进入下一节点（如抄送节点或结束）；拒绝后流程终止或退回。 |

### 阶段四：被抄送人知悉（审批中心）

```
抄送节点触发 / 审批人点击抄送 → 被抄送人收到通知 → 抄送我的中查看
```

| 步骤 | 操作 | 说明 |
|------|------|------|
| 1 | 抄送触发 | 流程到达抄送节点时自动抄送，或审批人点击「抄送」按钮手动选择抄送人。 |
| 2 | 收到通知 | 被抄送人通过消息中心或「抄送我的」入口收到提醒。 |
| 3 | 查看详情 | 在「抄送我的」中查看流程，无需审批，仅作知悉。 |

### 阶段五：发起人跟踪与流程结束

```
我的流程 → 查看进度 → 流程完成
```

| 步骤 | 操作 | 说明 |
|------|------|------|
| 1 | 跟踪进度 | 发起人在「我的流程」中查看请假申请的审批进度、当前审批人。 |
| 2 | 流程完成 | 全部审批通过后流程结束，发起人可查看最终结果。 |
| 3 | 历史记录 | 审批人的「已办任务」、管理员的「流程实例」「流程任务」中均可查看历史。 |

### 流程全流程示意图

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        管理员（流程管理）                                  │
│  流程分类 → 流程表单 → 流程模型设计 → 发布                                  │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│                        员工（审批中心 - 发起流程）                          │
│  选择流程 → 填写表单 → 提交 → 创建流程实例                                  │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│                        审批人（审批中心 - 待办任务）                         │
│  查看待办 → 进入详情 → 通过/拒绝/转办/委派/抄送等 → 流程流转                 │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│              被抄送人（审批中心 - 抄送我的）                                 │
│  收到抄送 → 查看详情（仅知悉，无需审批）                                    │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓
┌─────────────────────────────────────────────────────────────────────────┐
│                        发起人（审批中心 - 我的流程）                         │
│  跟踪进度 → 流程完成 → 查看结果                                            │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 三、工作流程概述（简要对照表）

工作流程模块包含以下核心功能：

| 功能 | 说明 | 入口路径 |
|------|------|----------|
| 流程模型 | 设计、编辑、发布流程定义 | 工作流程 → 流程模型 |
| 发起流程 | 选择流程并填写表单发起 | 首页「发起流程」或 工作流程 → 发起流程 |
| 待办任务 | 需要我审批的任务列表 | 工作流程 → 待办任务 |
| 已办任务 | 我已审批完成的任务 | 工作流程 → 已办任务 |
| **抄送我的** | 被抄送给我的流程列表 | 工作流程 → 抄送我的 |
| 我的流程 | 我发起的流程实例 | 工作流程 → 我的流程 |

---

## 四、抄送功能详解

### 4.1 抄送是什么？

**抄送**是指将流程的审批进度或结果通知给相关人员，被抄送人可以在「抄送我的」中查看流程信息，但**不需要审批**，仅作知悉。

抄送有两种来源：

1. **流程设计中的抄送节点**：流程流转到抄送节点时，系统自动将流程信息发送给预设的抄送人
2. **审批时的抄送按钮**：审批人在通过/拒绝时，可手动选择抄送人，将本次审批结果通知对方

---

## 五、在流程设计中设置抄送节点

### 5.1 进入流程设计

1. 进入 **工作流程 → 流程模型**
2. 找到目标流程，点击 **设计** 或 **编辑**
3. 在顶部步骤条中，切换到 **第三步：流程设计**

### 5.2 添加抄送节点

1. 在流程画布中，找到需要添加抄送的位置（例如某个审批节点之后）
2. 点击该节点右侧的 **「+」** 加号
3. 在弹出的节点类型列表中，选择 **「抄送」**
4. 抄送节点会插入到当前节点与下一节点之间

### 5.3 配置抄送人

点击新添加的抄送节点，打开右侧配置面板，在 **「抄送人」** 标签页中进行设置。

#### 抄送人设置策略

系统支持多种抄送人策略（与审批人策略类似，但不含「发起人自选」「发起人自己」）：

| 策略 | 说明 | 需额外配置 |
|------|------|------------|
| **指定成员** | 固定指定若干用户为抄送人 | 选择具体用户 |
| **指定角色** | 指定角色下的所有用户 | 选择角色 |
| **指定岗位** | 指定岗位下的所有用户 | 选择岗位 |
| **部门成员** | 指定部门下的所有成员 | 选择部门 |
| **部门负责人** | 指定部门的负责人 | 选择部门 |
| **连续多级部门负责人** | 从指定部门向上多级部门的负责人 | 选择部门 + 层级 |
| **发起人部门负责人** | 发起人所在部门的负责人 | 部门负责人来源（发起人部门向上） |
| **发起人连续部门负责人** | 发起人部门向上多级负责人 | 部门负责人来源 |
| **用户组** | 指定用户组内的成员 | 选择用户组 |
| **表单内用户字段** | 从流程表单中的用户选择器字段取值 | 选择表单字段 |
| **表单内部门负责人** | 从流程表单中的部门选择器字段取值，取其负责人 | 选择表单字段 |
| **流程表达式** | 通过表达式动态计算抄送人 | 填写表达式 |

#### 配置示例

**示例 1：固定抄送给张三、李四**

- 抄送人设置：选择 **「指定成员」**
- 指定用户：勾选 张三、李四

**示例 2：抄送给发起人的部门负责人**

- 抄送人设置：选择 **「发起人部门负责人」**
- 无需额外配置，流程运行时自动取发起人所在部门的负责人

**示例 3：抄送给表单中「抄送人」字段选择的用户**

- 抄送人设置：选择 **「表单内用户字段」**
- 表单内用户字段：选择流程表单中的「抄送人」字段（需为用户选择器类型且必填）

### 5.4 保存并发布

1. 配置完成后点击 **「确定」** 关闭配置面板
2. 点击顶部 **「保存」** 保存流程设计
3. 若流程已发布过，修改后需点击 **「发布」** 才能生效

---

## 六、审批时的抄送操作

审批人在处理待办任务时，可以**手动抄送**给其他人：

1. 进入 **待办任务**，点击某条任务进入流程详情
2. 在操作按钮区域，点击 **「抄送」** 按钮
3. 在弹出的表单中：
   - **抄送人**：选择要通知的用户（可多选）
   - **抄送意见**：填写说明（可选）
4. 点击 **「抄送」** 提交

被抄送人将收到通知，并可在 **「抄送我的」** 中查看该流程。

> 注意：点击「抄送」不会改变流程的审批状态，流程仍由当前审批人处理。抄送只是额外通知。

---

## 七、查看「抄送我的」

1. 进入 **工作流程 → 抄送我的**（或首页快捷入口「抄送我的」）
2. 列表展示所有抄送给你的流程，包括：
   - 流程名称
   - 抄送节点名称
   - 抄送人（谁发起的抄送）
   - 抄送意见
   - 抄送时间
3. 可点击流程进入详情查看，但**无需审批**

---

## 八、完整流程示例：从设计到抄送

### 场景：请假流程，审批通过后抄送给部门负责人和 HR

**步骤 1：设计流程**

1. 流程模型 → 编辑「请假流程」
2. 流程设计：`发起人 → 部门审批 → 抄送节点 → 结束`
3. 在「部门审批」之后添加抄送节点

**步骤 2：配置抄送节点**

1. 点击抄送节点，打开配置
2. 抄送人设置：选择 **「部门负责人」**
3. 指定部门：选择「人事部」（或根据实际需求选择）
4. 若还需抄送给发起人部门负责人，可再添加一个抄送节点，或使用「发起人部门负责人」策略

**步骤 3：发布流程**

1. 保存 → 发布

**步骤 4：运行效果**

- 员工发起请假
- 部门审批通过后，流程进入抄送节点
- 系统自动将流程抄送给人事部负责人（及你配置的其他人）
- 被抄送人在「抄送我的」中可查看该请假流程

---

## 九、其他常用功能速览

### 9.1 审批节点类型

- **审批人**：需要审批通过/拒绝的节点
- **办理人**：与审批人类似，侧重「办理」语义
- **抄送**：仅通知，不需审批

### 9.2 审批操作按钮

审批人在待办任务中可进行的操作：

| 按钮 | 说明 |
|------|------|
| 通过 | 审批通过，流程进入下一节点 |
| 拒绝 | 审批拒绝，流程可终止或退回 |
| 转办 | 将任务转给他人审批，对方审批后流程继续 |
| 委派 | 临时委派他人审批，对方审批后任务回到自己 |
| 加签 | 增加审批人 |
| 退回 | 退回到指定节点 |
| 抄送 | 将流程抄送给指定人（不改变审批状态） |

### 9.3 流程设计中的其他节点

- **条件分支**：根据条件走不同分支
- **并行分支**：多个分支同时执行
- **包容分支**：满足条件的分支都会执行
- **延迟器**：延迟一定时间后继续
- **路由分支**：按规则路由
- **触发器**：触发外部逻辑
- **子流程**：调用其他流程

---

## 十、常见问题

**Q：抄送节点和审批时点「抄送」有什么区别？**

- 抄送节点：流程设计时预设，流程**自动**到达该节点时触发抄送
- 审批抄送：审批人**手动**选择抄送人，灵活但不自动

**Q：抄送人策略中没有「发起人自选」？**

- 抄送节点不支持「发起人自选」「发起人自己」，因为抄送是通知行为，需要明确对象。若需发起人选择抄送人，可使用「表单内用户字段」策略，在表单中增加抄送人选择字段。

**Q：修改流程设计后，已发起的流程会变吗？**

- 不会。已发起的流程按发布时的版本运行。新发起的流程才会使用最新版本。

**Q：「抄送我的」里能看到流程详情吗？**

- 可以。点击列表中的流程可进入详情页查看，但无需进行审批操作。

---

## 十一、参考链接

- 芋道官方文档 - 审批转办、委派、抄送：https://doc.iocoder.cn/bpm/task-delegation-and-cc/
- 审批通过、不通过、驳回：https://doc.iocoder.cn/bpm/task-todo-done/
